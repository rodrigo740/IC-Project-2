\hypertarget{Golomb_8h_source}{}\doxysection{Golomb.\+h}

\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{preprocessor}{\#include<iostream>}}
\DoxyCodeLine{2 \textcolor{preprocessor}{\#include<fstream>}}
\DoxyCodeLine{3 \textcolor{preprocessor}{\#include<vector>}}
\DoxyCodeLine{4 \textcolor{preprocessor}{\#include<math.h>}}
\DoxyCodeLine{5 \textcolor{keyword}{using namespace }std;}
\DoxyCodeLine{6 }
\DoxyCodeLine{7 \textcolor{keyword}{class }\mbox{\hyperlink{classGolomb}{Golomb}} \{}
\DoxyCodeLine{8     \textcolor{keywordtype}{int} m;}
\DoxyCodeLine{15     \textcolor{keyword}{public}: }
\DoxyCodeLine{19         \mbox{\hyperlink{classGolomb_a4b8fb36e352ebdd88b26a006406d3679}{Golomb}}(\textcolor{keywordtype}{int} param)\{}
\DoxyCodeLine{20             m = param;}
\DoxyCodeLine{21         \}}
\DoxyCodeLine{22 }
\DoxyCodeLine{23     vector<int> \mbox{\hyperlink{classGolomb_a6b726fb17d1fe86ba2765fff8bb56b3e}{encode}}(\textcolor{keywordtype}{int} n)\{}
\DoxyCodeLine{28         n = \mbox{\hyperlink{classGolomb_a9b3954e22fc595f4512d7d8ebaf3ba7c}{folding}}(n);}
\DoxyCodeLine{29         vector<int> code;}
\DoxyCodeLine{30         \textcolor{keywordtype}{int} q = n/m;}
\DoxyCodeLine{31         \textcolor{keywordtype}{int} r = n\%m;}
\DoxyCodeLine{32         \textcolor{comment}{// unary code}}
\DoxyCodeLine{33         \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = 0; i < q; i++)\{}
\DoxyCodeLine{34             code.push\_back(0);}
\DoxyCodeLine{35         \}}
\DoxyCodeLine{36         code.push\_back(1);}
\DoxyCodeLine{37         }
\DoxyCodeLine{38         \textcolor{comment}{//binary code}}
\DoxyCodeLine{39 }
\DoxyCodeLine{40         \textcolor{keywordtype}{double} rt = log2(m);}
\DoxyCodeLine{41         \textcolor{keywordtype}{double} resto = rt -\/ (int) rt;}
\DoxyCodeLine{42 }
\DoxyCodeLine{43         \textcolor{keywordflow}{if} (resto == 0)\{}
\DoxyCodeLine{44             \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} j : \mbox{\hyperlink{classGolomb_aa77063d00e3e66d235a0a970c9b466cd}{decToBinary}}(r,m))\{}
\DoxyCodeLine{45                 code.push\_back(j);}
\DoxyCodeLine{46             \}}
\DoxyCodeLine{47         \textcolor{comment}{//truncated binary encoding}}
\DoxyCodeLine{48         \}\textcolor{keywordflow}{else}\{}
\DoxyCodeLine{49                 \textcolor{keywordtype}{int} x = r, k = 0, t = m;}
\DoxyCodeLine{50                 \textcolor{keywordflow}{while} (t > 1)\{}
\DoxyCodeLine{51                     k++;}
\DoxyCodeLine{52                     t >>=1;}
\DoxyCodeLine{53                 \}}
\DoxyCodeLine{54 }
\DoxyCodeLine{55                 \textcolor{keywordtype}{int} u = (1 << k+1) -\/ m;}
\DoxyCodeLine{56                 \textcolor{keywordtype}{string} res;}
\DoxyCodeLine{57                 \textcolor{keywordflow}{if} (x < u) \{}
\DoxyCodeLine{58                     res = \mbox{\hyperlink{classGolomb_a52524782b3cf4756a837f823fd4785bf}{binary}}(x, k);}
\DoxyCodeLine{59                 \}\textcolor{keywordflow}{else}\{}
\DoxyCodeLine{60                     res = \mbox{\hyperlink{classGolomb_a52524782b3cf4756a837f823fd4785bf}{binary}}(x + u, k + 1);}
\DoxyCodeLine{61                 \}}
\DoxyCodeLine{62 }
\DoxyCodeLine{63                 \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < res.length(); i++)\{}
\DoxyCodeLine{64                     \textcolor{keywordtype}{int} j = res[i] -\/ 48;}
\DoxyCodeLine{65                     code.push\_back(j);}
\DoxyCodeLine{66                 \}}
\DoxyCodeLine{67         \}  }
\DoxyCodeLine{68 }
\DoxyCodeLine{69         \textcolor{keywordflow}{return} code;}
\DoxyCodeLine{70     \}}
\DoxyCodeLine{71 }
\DoxyCodeLine{72     \textcolor{keywordtype}{string} \mbox{\hyperlink{classGolomb_a52524782b3cf4756a837f823fd4785bf}{binary}} (\textcolor{keywordtype}{int} x, \textcolor{keywordtype}{int} len)\{}
\DoxyCodeLine{77         \textcolor{keywordtype}{string} s = \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{78         \textcolor{keywordflow}{if}(x == 0)\{}
\DoxyCodeLine{79             s += \textcolor{charliteral}{'0'};}
\DoxyCodeLine{80         \}}
\DoxyCodeLine{81         \textcolor{keywordflow}{while} (x!=0)\{}
\DoxyCodeLine{82             \textcolor{keywordflow}{if} (\mbox{\hyperlink{classGolomb_a21c6c56316f1132728bd1322e8c8adea}{even}}(x))}
\DoxyCodeLine{83             \{}
\DoxyCodeLine{84                 s = \textcolor{charliteral}{'0'} + s;}
\DoxyCodeLine{85             \}\textcolor{keywordflow}{else}\{}
\DoxyCodeLine{86                 s = \textcolor{charliteral}{'1'} + s;}
\DoxyCodeLine{87             \}}
\DoxyCodeLine{88             x >>= 1;}
\DoxyCodeLine{89         \}}
\DoxyCodeLine{90         \textcolor{keywordflow}{while} (s.length() < len)\{}
\DoxyCodeLine{91             s = \textcolor{charliteral}{'0'} + s;}
\DoxyCodeLine{92             }
\DoxyCodeLine{93         \}}
\DoxyCodeLine{94         \textcolor{keywordflow}{return} s;}
\DoxyCodeLine{95     \}}
\DoxyCodeLine{96 }
\DoxyCodeLine{97     \textcolor{keywordtype}{bool} \mbox{\hyperlink{classGolomb_a21c6c56316f1132728bd1322e8c8adea}{even}}(\textcolor{keywordtype}{int} x)\{}
\DoxyCodeLine{102         \textcolor{keywordflow}{return} x\%2 == 0;}
\DoxyCodeLine{103     \}}
\DoxyCodeLine{104 }
\DoxyCodeLine{105     \textcolor{keywordtype}{int} \mbox{\hyperlink{classGolomb_aafa10f25cfb3050880031f4317c8d6bf}{decode}}(vector<int> code)\{}
\DoxyCodeLine{110         \textcolor{keywordtype}{int} n = 0;}
\DoxyCodeLine{111         \textcolor{keywordtype}{int} q = 0;}
\DoxyCodeLine{112         \textcolor{keywordtype}{int} r = 0;}
\DoxyCodeLine{113         \textcolor{keywordtype}{int} nbits = log2(m);}
\DoxyCodeLine{114         \textcolor{comment}{//cout << "{}nbits: "{} << nbits << endl;}}
\DoxyCodeLine{115         \textcolor{keywordtype}{double} rt = log2(m);}
\DoxyCodeLine{116         \textcolor{keywordtype}{double} resto = rt -\/ (int) rt;}
\DoxyCodeLine{117         vector<int> res = code;}
\DoxyCodeLine{118         }
\DoxyCodeLine{119         \textcolor{comment}{/*cout << "{}code before: "{};}}
\DoxyCodeLine{120 \textcolor{comment}{        for (int c : code) \{}}
\DoxyCodeLine{121 \textcolor{comment}{            cout << c;}}
\DoxyCodeLine{122 \textcolor{comment}{        \}}}
\DoxyCodeLine{123 \textcolor{comment}{        cout << endl;*/}}
\DoxyCodeLine{124         }
\DoxyCodeLine{125         \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i : res)\{}
\DoxyCodeLine{126             \textcolor{keywordflow}{if}(i!=1)\{}
\DoxyCodeLine{127                 q++;}
\DoxyCodeLine{128                 code.erase(code.begin());}
\DoxyCodeLine{129             \}}
\DoxyCodeLine{130             \textcolor{keywordflow}{else}\{}
\DoxyCodeLine{131                 code.erase(code.begin());}
\DoxyCodeLine{132                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{133             \}}
\DoxyCodeLine{134         \}}
\DoxyCodeLine{135 }
\DoxyCodeLine{136         \textcolor{comment}{/*cout << "{}code after: "{};}}
\DoxyCodeLine{137 \textcolor{comment}{        for (int c : code) \{}}
\DoxyCodeLine{138 \textcolor{comment}{            cout << c;}}
\DoxyCodeLine{139 \textcolor{comment}{        \}}}
\DoxyCodeLine{140 \textcolor{comment}{        cout << endl;*/}}
\DoxyCodeLine{141 }
\DoxyCodeLine{142         \textcolor{keywordflow}{if}(resto == 0)\{}
\DoxyCodeLine{143             r = \mbox{\hyperlink{classGolomb_a1e9d48be65a63b2cf1d1494c6486ac96}{binaryToDecimal}}(code);}
\DoxyCodeLine{144         \}}
\DoxyCodeLine{145         \textcolor{comment}{//truncated binary decoding}}
\DoxyCodeLine{146         \textcolor{keywordflow}{else}\{}
\DoxyCodeLine{147             \textcolor{keywordtype}{string} tmp = \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{148             \textcolor{keywordtype}{int} u = (1 << nbits+1) -\/ m;}
\DoxyCodeLine{149             \textcolor{comment}{// read the first nbits}}
\DoxyCodeLine{150             \textcolor{comment}{//cout << "{}nbits: "{} << nbits << endl;}}
\DoxyCodeLine{151             \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = 0; i < nbits; i++)\{}
\DoxyCodeLine{152                 tmp += to\_string(code[i]);}
\DoxyCodeLine{153             \}}
\DoxyCodeLine{154             vector<int> aux;}
\DoxyCodeLine{155             \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = 0; i < nbits; i++)\{}
\DoxyCodeLine{156                 aux.push\_back(code[i]);}
\DoxyCodeLine{157             \}}
\DoxyCodeLine{158             \textcolor{keywordtype}{int} result = \mbox{\hyperlink{classGolomb_a1e9d48be65a63b2cf1d1494c6486ac96}{binaryToDecimal}}(aux);}
\DoxyCodeLine{159             }
\DoxyCodeLine{160             \textcolor{comment}{//if they encode a value less than u}}
\DoxyCodeLine{161             \textcolor{keywordflow}{if}(result < u)\{}
\DoxyCodeLine{162                 r = result;}
\DoxyCodeLine{163             \}}
\DoxyCodeLine{164             \textcolor{comment}{//read an additional bit and subtract u from result}}
\DoxyCodeLine{165             \textcolor{keywordflow}{else}\{}
\DoxyCodeLine{166                 \textcolor{comment}{//cout << "{}result != u"{} << endl;}}
\DoxyCodeLine{167                 aux.push\_back(code[nbits]);}
\DoxyCodeLine{168                 \textcolor{comment}{//tmp += to\_string(code[nbits]);}}
\DoxyCodeLine{169                 result = \mbox{\hyperlink{classGolomb_a1e9d48be65a63b2cf1d1494c6486ac96}{binaryToDecimal}}(aux);}
\DoxyCodeLine{170                 \textcolor{comment}{//result = stoll(tmp);}}
\DoxyCodeLine{171                 \textcolor{comment}{//result = binaryToDecimalINT(result) -\/ u;}}
\DoxyCodeLine{172                 result = result -\/ u;}
\DoxyCodeLine{173                 \textcolor{comment}{//result = decimalToBinary(result);}}
\DoxyCodeLine{174                 \textcolor{comment}{//r = binaryToDecimalINT(result);}}
\DoxyCodeLine{175                 r = result;}
\DoxyCodeLine{176             \}}
\DoxyCodeLine{177         \}}
\DoxyCodeLine{178         n=q*m+r;}
\DoxyCodeLine{179         \textcolor{keywordflow}{return} \mbox{\hyperlink{classGolomb_ab928097af53531e7e41e957b811137f3}{unfolding}}(n);}
\DoxyCodeLine{180     \}}
\DoxyCodeLine{181 }
\DoxyCodeLine{182     \textcolor{keywordtype}{int} \mbox{\hyperlink{classGolomb_adf9e773238a1191c8eb1d181f4ec8cd3}{decimalToBinary}}(\textcolor{keywordtype}{int} N)}
\DoxyCodeLine{183     \{}
\DoxyCodeLine{189         \textcolor{comment}{// To store the binary number}}
\DoxyCodeLine{190         \textcolor{keywordtype}{int} B\_Number = 0;}
\DoxyCodeLine{191         \textcolor{keywordtype}{int} cnt = 0;}
\DoxyCodeLine{192         \textcolor{keywordflow}{while} (N != 0) \{}
\DoxyCodeLine{193             \textcolor{keywordtype}{int} rem = N \% 2;}
\DoxyCodeLine{194             \textcolor{keywordtype}{int} c = pow(10, cnt);}
\DoxyCodeLine{195             B\_Number += rem * c;}
\DoxyCodeLine{196             N /= 2;}
\DoxyCodeLine{197     }
\DoxyCodeLine{198             \textcolor{comment}{// Count used to store exponent value}}
\DoxyCodeLine{199             cnt++;}
\DoxyCodeLine{200         \}}
\DoxyCodeLine{201     }
\DoxyCodeLine{202         \textcolor{keywordflow}{return} B\_Number;}
\DoxyCodeLine{203     \}}
\DoxyCodeLine{204 }
\DoxyCodeLine{205     vector<int> \mbox{\hyperlink{classGolomb_aa77063d00e3e66d235a0a970c9b466cd}{decToBinary}}(\textcolor{keywordtype}{int} n, \textcolor{keywordtype}{int} m)\{}
\DoxyCodeLine{210         \textcolor{keywordtype}{int} nbits = log2(m);}
\DoxyCodeLine{211         vector<int> binaryNum;}
\DoxyCodeLine{212         vector<int> bin;}
\DoxyCodeLine{213         \textcolor{keywordtype}{int} i = 0;}
\DoxyCodeLine{214         \textcolor{keywordflow}{while} (n > 0) \{}
\DoxyCodeLine{215             \textcolor{comment}{// storing remainder in binary array}}
\DoxyCodeLine{216             binaryNum.push\_back(n \% 2);}
\DoxyCodeLine{217             n = n / 2;}
\DoxyCodeLine{218             i++;}
\DoxyCodeLine{219         \}}
\DoxyCodeLine{220         \textcolor{keywordtype}{int} dif = nbits -\/ i;}
\DoxyCodeLine{221         \textcolor{keywordflow}{while}(dif > 0)\{}
\DoxyCodeLine{222             bin.push\_back(0);}
\DoxyCodeLine{223             \textcolor{comment}{//bin.insert(bin.begin(), 0);}}
\DoxyCodeLine{224             dif=dif-\/1;}
\DoxyCodeLine{225         \}}
\DoxyCodeLine{226         }
\DoxyCodeLine{227         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i= binaryNum.size()-\/1; i>=0; i-\/-\/)\{}
\DoxyCodeLine{228             bin.push\_back(binaryNum[i]);}
\DoxyCodeLine{229         \}}
\DoxyCodeLine{230         binaryNum = bin;}
\DoxyCodeLine{231 }
\DoxyCodeLine{232         \textcolor{keywordflow}{return} binaryNum;}
\DoxyCodeLine{233     \}}
\DoxyCodeLine{234 }
\DoxyCodeLine{235     \textcolor{keywordtype}{int} \mbox{\hyperlink{classGolomb_a1e9d48be65a63b2cf1d1494c6486ac96}{binaryToDecimal}}(vector<int> n)\{}
\DoxyCodeLine{240         \textcolor{keywordtype}{int} dec\_value = 0;}
\DoxyCodeLine{241         \textcolor{comment}{// Initializing base value to 1, i.e 2\string^0}}
\DoxyCodeLine{242         \textcolor{keywordtype}{int} base = 1;}
\DoxyCodeLine{243         \textcolor{keywordtype}{int} pos = 1;}
\DoxyCodeLine{244 }
\DoxyCodeLine{245         \textcolor{keywordflow}{while} (pos<=n.size()) \{}
\DoxyCodeLine{246             \textcolor{keywordtype}{int} last\_digit = n[n.size()-\/pos];}
\DoxyCodeLine{247             pos++;}
\DoxyCodeLine{248 }
\DoxyCodeLine{249             dec\_value += last\_digit * base;}
\DoxyCodeLine{250 }
\DoxyCodeLine{251             base = base * 2;}
\DoxyCodeLine{252         \}}
\DoxyCodeLine{253 }
\DoxyCodeLine{254         \textcolor{keywordflow}{return} dec\_value;}
\DoxyCodeLine{255     \}}
\DoxyCodeLine{256 }
\DoxyCodeLine{257     \textcolor{keywordtype}{int} \mbox{\hyperlink{classGolomb_a6823193c3c8f810c893976817a4c6ee0}{binaryToDecimalINT}}(\textcolor{keywordtype}{int} n)}
\DoxyCodeLine{258     \{}
\DoxyCodeLine{263         \textcolor{keywordtype}{int} num = n;}
\DoxyCodeLine{264         \textcolor{keywordtype}{int} dec\_value = 0;}
\DoxyCodeLine{265     }
\DoxyCodeLine{266         \textcolor{comment}{// Initializing base value to 1, i.e 2\string^0}}
\DoxyCodeLine{267         \textcolor{keywordtype}{int} base = 1;}
\DoxyCodeLine{268     }
\DoxyCodeLine{269         \textcolor{keywordtype}{int} temp = num;}
\DoxyCodeLine{270         \textcolor{keywordflow}{while} (temp) \{}
\DoxyCodeLine{271             \textcolor{keywordtype}{int} last\_digit = temp \% 10;}
\DoxyCodeLine{272             temp = temp / 10;}
\DoxyCodeLine{273     }
\DoxyCodeLine{274             dec\_value += last\_digit * base;}
\DoxyCodeLine{275     }
\DoxyCodeLine{276             base = base * 2;}
\DoxyCodeLine{277         \}}
\DoxyCodeLine{278     }
\DoxyCodeLine{279         \textcolor{keywordflow}{return} dec\_value;}
\DoxyCodeLine{280     \}}
\DoxyCodeLine{281 }
\DoxyCodeLine{282     \textcolor{keywordtype}{int} \mbox{\hyperlink{classGolomb_a9b3954e22fc595f4512d7d8ebaf3ba7c}{folding}}(\textcolor{keywordtype}{int} n)\{}
\DoxyCodeLine{287         \textcolor{keywordtype}{int} x;}
\DoxyCodeLine{288 }
\DoxyCodeLine{289         \textcolor{keywordflow}{if}(n >= 0)\{}
\DoxyCodeLine{290             x = 2*n;}
\DoxyCodeLine{291         \}\textcolor{keywordflow}{else}\{}
\DoxyCodeLine{292             x = 2*abs(n)-\/1;}
\DoxyCodeLine{293         \}}
\DoxyCodeLine{294         }
\DoxyCodeLine{295         \textcolor{keywordflow}{return} x;}
\DoxyCodeLine{296     \}}
\DoxyCodeLine{297 }
\DoxyCodeLine{298     \textcolor{keywordtype}{int} \mbox{\hyperlink{classGolomb_ab928097af53531e7e41e957b811137f3}{unfolding}}(\textcolor{keywordtype}{int} n)\{}
\DoxyCodeLine{303         \textcolor{keywordtype}{int} x;}
\DoxyCodeLine{304 }
\DoxyCodeLine{305         \textcolor{keywordflow}{if}(n\%2==0)\{}
\DoxyCodeLine{306             x = n/2;}
\DoxyCodeLine{307         \}\textcolor{keywordflow}{else}\{}
\DoxyCodeLine{308             x = -\/(n+1)/2;}
\DoxyCodeLine{309         \}}
\DoxyCodeLine{310 }
\DoxyCodeLine{311         \textcolor{keywordflow}{return} x;}
\DoxyCodeLine{312     \}}
\DoxyCodeLine{313 }
\DoxyCodeLine{314 \};}

\end{DoxyCode}
